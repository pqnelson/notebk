\def\CC{\mathbb{C}}
\def\NN{\mathbb{N}}
\def\QQ{\mathbb{Q}}
\def\RR{\mathbb{R}}
\def\ZZ{\mathbb{Z}}


\def\id{\mathrm{id}}
\def\dihedral#1{D_{#1}}
\def\GL{\mathrm{GL}}
\def\Mat{\mathrm{Mat}}
\def\SL{\mathrm{SL}}
%\def\normalSubgroup{\triangleleft}%{\mathrel{\unlhd}}
\def\properNormalSubgroup{\trianglelefteq}%{\mathrel{\lhd}}
\def\normalSubgroup{\mathrel{\lhd}}

\def\powerset{\mathcal{P}}
\def\hom{\mathop{\rm Hom}\nolimits}
\def\tr{\mathop{\rm tr}\nolimits}

% calculus
\def\D{\mathrm{d}}
\def\E{\mathrm{e}}
\def\I{\mathrm{i}} % = \sqrt{-1}

\let\vec\boldsymbol
\newcommand\amplitude{A}
\def\Re{\operatorname{Re}}
\def\Im{\operatorname{Im}}
\def\bigOh{\mathcal{O}}
\newcommand\propagator{\Delta}
\DeclareMathOperator{\Res}{Res}

% Feynman diagram stuff
% Momentum Arrow https://wiki.physik.uzh.ch/cms/latex:feynman
\newcommand{\marrow}[5]{%
    \fmfcmd{style_def marrow#1
    expr p = drawarrow subpath (1/4, 3/4) of p shifted 6 #2 withpen pencircle scaled 0.4;
    label.#3(btex #4 etex, point 0.5 of p shifted 6 #2);
    enddef;}
    \fmf{marrow#1,tension=0}{#5}}


% https://tex.stackexchange.com/a/598835/14751
\newcommand{\eqgraph}[3]{%
  % #1 = adjustment above, #2 = adjustment below, #3 = graph
  \begin{gathered}
  \raisebox{0pt}[\dimexpr\height+#1][\dimexpr\depth+#2]{\ignorespaces#3\unskip}%
  \end{gathered}
}